#include<stdio.h>
#include<string.h>
#define MaxSize 255
typedef struct{
	char ch[MaxSize];
	int length;
}SString;


void get_next(SString S,int next[]) {
	
	int i=0,j=-1;
	next[0]=-1;//第一个值一定为-1 
	while(i<S.length-1){
		if(j==-1||S.ch[i]==S.ch[j]){
			//移动指针并且给next赋值 
			i++;
			j++;
			next[i]=j; 
		}
		else{
			//指针j退回对应next
			j=next[j]; 
		}
	}
}



int Index(SString S,SString T,int next[]){
	int i=0,j=0;
	while(i<S.length&&j<T.length){
		if(j==-1||S.ch[i]==T.ch[j]){
			i++;
			j++;
		}
		else{
			//重新匹配 
			j=next[j];
		}
	}
	if(j>=T.length){
		return i-T.length;
	} 
	return -1;
}

int main(){
	SString s,t;
	int index=0;
	for (index = 0; index < 10; index++) {
        s.ch[index] = "abbcddabbc"[index];
    }
	s.length=10;
	for (index = 0; index < 3; index++) {
        t.ch[index] = "dab"[index];
    }
	t.length=3;
	int next[t.length];
	get_next(t,next);
	int ans=Index(s,t,next);
	printf("%d",ans);
	return 0;
	
} 
